{"version":3,"sources":["webpack:///src/app/gallery/gallery.module.ts","webpack:///src/app/gallery/gallery.page.scss","webpack:///src/app/gallery/gallery.page.html","webpack:///src/app/gallery/gallery.page.ts"],"names":["routes","path","component","GalleryPageModule","imports","forChild","declarations","GalleryPage","storage","toastController","alertController","activatedRoute","router","camera","actionSheet","photoLibrary","navCtrl","loadingController","appConst","httpClient","current_mode","buttonLabels","options","quality","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","saveToPhotoAlbum","libraryOptions","sourceType","PictureSourceType","PHOTOLIBRARY","actionOptions","title","addCancelButtonWithLabel","androidTheme","apiurl","getApiUrl","create","message","loading","present","setTimeout","undefined","dismiss","console","log","set","navigateByUrl","current_theme","get","then","userdata","length","theme","toLowerCase","log_status","document","body","classList","toggle","recordid","columnname","params","headers","append","showLoading","post","observe","subscribe","data","success","propertypics","hideLoading","error","show","buttonIndex","getPicture","imageData","base64Image","presentToastPrimary","err","presentToast","header","buttons","text","role","cssClass","handler","getElementById","style","display","alert","duration","position","color","toast","serviceid","navigateBack","userData","serviceName","servicename","userinfo","loadTheme","isLogged","result","loadImages","logout","selector","template"],"mappings":"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","file":"gallery-gallery-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { GalleryPage } from './gallery.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GalleryPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [GalleryPage]\n})\nexport class GalleryPageModule {}\n","export default \".gallery {\\n  flex-wrap: wrap;\\n}\\n\\n.galleryimage {\\n  padding: 5px;\\n  -webkit-margin-start: 0px;\\n  margin-inline-start: 0x;\\n  -webkit-margin-end: 0px;\\n  margin-inline-end: 0px;\\n}\\n\\n.na {\\n  text-overflow: unset;\\n  white-space: normal;\\n  padding: unset;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dhbGxlcnkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksZUFBQTtBQUNKOztBQUNBO0VBQ0ksWUFBQTtFQUNBLHlCQUFBO0VBQ0EsdUJBQUE7RUFDQSx1QkFBQTtFQUNBLHNCQUFBO0FBRUo7O0FBQ0E7RUFDSSxvQkFBQTtFQUNBLG1CQUFBO0VBQ0EsY0FBQTtBQUVKIiwiZmlsZSI6ImdhbGxlcnkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmdhbGxlcnl7XG4gICAgLXdlYmtpdC1mbGV4LXdyYXA6IHdyYXA7XG4gICAgZmxleC13cmFwOiB3cmFwO1xufVxuLmdhbGxlcnlpbWFnZXtcbiAgICBwYWRkaW5nOiA1cHg7XG4gICAgLXdlYmtpdC1tYXJnaW4tc3RhcnQ6IDBweDsgXG4gICAgbWFyZ2luLWlubGluZS1zdGFydDogMHg7XG4gICAgLXdlYmtpdC1tYXJnaW4tZW5kOiAwcHg7IFxuICAgIG1hcmdpbi1pbmxpbmUtZW5kOiAwcHg7XG59XG5cbi5uYXtcbiAgICB0ZXh0LW92ZXJmbG93OiB1bnNldDtcbiAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgIHBhZGRpbmc6IHVuc2V0O1xufSJdfQ== */\";","export default \"<ion-header>\\n  \\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"secondary\\\">\\n      <ion-back-button type=\\\"button\\\" defaultHref=\\\"/services\\\" text=\\\"Back\\\" (click)=\\\"goToDetail(serviceid)\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <!-- <ion-button type=\\\"button\\\" text=\\\"Edit Photos\\\" (click)=\\\"editPhotos()\\\">\\n        <ion-text id=\\\"editphotos-button\\\" *ngIf=\\\"current_mode=='view'\\\">Edit Photos</ion-text>\\n        <ion-text id=\\\"editphotos-button\\\" *ngIf=\\\"current_mode=='edit'\\\">Done Editing</ion-text>\\n      </ion-button> -->\\n    </ion-buttons>\\n    <ion-title>{{serviceName}}'s Photos</ion-title>\\n  </ion-toolbar>\\n\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <!-- <ion-button expand=\\\"block\\\" (click)=\\\"launchCamera()\\\" text=\\\"Add Photos\\\"><ion-icon name=\\\"add\\\"></ion-icon><ion-text>Add Photos</ion-text></ion-button> -->\\n  <div class=\\\"gallery\\\" *ngIf=\\\"propertypics?.length > 0\\\">    \\n    <ion-card class=\\\"galleryimage\\\" *ngFor=\\\"let image of propertypics\\\" [id]=\\\"image\\\">\\n      <ion-img [src]=\\\"image\\\" width=\\\"150px\\\"></ion-img>\\n      <ion-fab vertical=\\\"top\\\" horizontal=\\\"end\\\" size=\\\"small\\\" *ngIf=\\\"current_mode=='edit'\\\">\\n        <ion-fab-button type=\\\"button\\\" size=\\\"small\\\" color=\\\"danger\\\" (click)=\\\"deletePhoto(image)\\\" style=\\\"height: 30px; width: 30px;\\\">\\n          <ion-icon name=\\\"close-circle\\\" role=\\\"img\\\" aria-label=\\\"close\\\"></ion-icon>\\n        </ion-fab-button>\\n      </ion-fab>\\n    </ion-card>\\n  </div>\\n  <div class=\\\"not-available\\\" *ngIf=\\\"propertypics?.length == 0\\\">\\n      <ion-title class=\\\"na\\\">There are currently no images for this service</ion-title>\\n  </div>\\n</ion-content>\\n\";","import { Component, OnInit, ComponentFactoryResolver } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { PhotoLibrary } from '@ionic-native/photo-library/ngx';\nimport { ActionSheet, ActionSheetOptions } from '@ionic-native/action-sheet/ngx';\nimport { AlertController, ToastController, NavController, LoadingController } from '@ionic/angular';\nimport * as pi from '../../assets/js/sampledata/properties-images.json';\nimport { Storage } from '@ionic/storage';\nimport { present } from '@ionic/core/dist/types/utils/overlays';\nimport { AppConstants } from '../providers/constant/constant';\nimport { HttpHeaders, HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-gallery',\n  templateUrl: './gallery.page.html',\n  styleUrls: ['./gallery.page.scss'],\n})\nexport class GalleryPage implements OnInit {\n  roomdata: any;\n  propertyimages: any;\n  propertypics: any;\n  current_mode: any = \"view\";\n  userinfo: any;\n  serviceName: any;\n  serviceid: any;\n  columnname: any;\n  apiurl: any;\n\n  buttonLabels = ['Take Photo', 'Upload from Library'];\n\n  options: CameraOptions = {\n    quality: 50,\n    destinationType: this.camera.DestinationType.DATA_URL,\n    encodingType: this.camera.EncodingType.JPEG,\n    mediaType: this.camera.MediaType.PICTURE,\n    saveToPhotoAlbum: false //true causes crash probably due to permissions to access library.\n  }\n\n  libraryOptions: CameraOptions = {\n    quality: 100,\n    destinationType: this.camera.DestinationType.DATA_URL,\n    encodingType: this.camera.EncodingType.JPEG,\n    mediaType: this.camera.MediaType.PICTURE,\n    sourceType: this.camera.PictureSourceType.PHOTOLIBRARY\n  }\n\n  actionOptions: ActionSheetOptions = {\n    title: 'Which would you like to do?',\n    buttonLabels: this.buttonLabels,\n    addCancelButtonWithLabel: 'Cancel',\n    androidTheme: 1 //this.actionSheet.ANDROID_THEMES.THEME_HOLO_DARK,\n  }\n\n  constructor(\n    public storage: Storage, \n    public toastController: ToastController, \n    public alertController: AlertController, \n    private activatedRoute: ActivatedRoute, \n    private router: Router, \n    private camera: Camera, \n    private actionSheet: ActionSheet, \n    private photoLibrary: PhotoLibrary,\n    public navCtrl: NavController,\n    public loadingController: LoadingController,\n    public appConst: AppConstants,\n    private httpClient: HttpClient\n    ) {\n      this.apiurl = this.appConst.getApiUrl();\n     }\n    loading: any;\n    async showLoading() {\n      this.loading = await this.loadingController.create({\n          message: 'Loading ...'\n      });\n      return await this.loading.present();\n  }\n\n  async hideLoading() {\n      setTimeout(() => {\n          if(this.loading != undefined){\n              this.loading.dismiss();\n          }\n      }, 1000);\n  }\n  /* Default Auth Guard and Theme Loader */\n  logout(){\n    console.log('logging out, no user data found');\n    this.storage.set(\"userdata\", null);\n    this.router.navigateByUrl('/login');\n  }\n\n  async getCurrentTheme(){\n    var current_theme = this.storage.get('userdata').then((userdata) => {\n      if(userdata && userdata.length !== 0){\n        //current_theme = userdata.theme.toLowerCase();\n        return userdata.theme.toLowerCase();\n      }else{\n        return false;\n      }\n    })\n    return current_theme;\n  }\n\n  async isLogged(){\n    var log_status = this.storage.get('userdata').then((userdata) => {\n       if(userdata && userdata.length !== 0){\n         return userdata;\n       }else{\n         return false;\n       }\n     })\n     return log_status;\n   }\n\n   loadTheme(theme){\n    document.body.classList.toggle(theme, true);\n   }\n\n  /* Default Auth Guard and Theme Loader */\n\n  loadImages(recordid,columnname){\n    /* this.propertyimages = pi.propertiesimages;\n    console.log('loading images for', room, recordid);\n    var images = this.propertyimages.filter(object => {\n      return object.recordid == recordid;\n    });\n    console.log(images[0].rooms[room].images);\n    var pics = images[0].rooms[room].images;\n    this.propertypics = pics; */\n    var params = {\n      recordid: recordid,\n      columnname: columnname\n    }\n    console.log('fetching documents for', params);\n    var headers = new HttpHeaders();\n    headers.append(\"Accept\", 'application/json');\n    headers.append('Content-Type', 'application/x-www-form-urlencoded');\n    headers.append('Access-Control-Allow-Origin', '*');\n    this.showLoading();\n    this.httpClient.post(this.apiurl + \"getPhotos.php\", params, {headers: headers, observe: 'response'})\n      .subscribe(data => {\n        console.log(data['body']);\n        var success = data['body']['success'];\n        console.log('fetching photos response was', success);\n        if(success == true){\n          this.propertypics = data['body']['data'];\n        }else{\n          console.log('fetch photos failed');\n          this.hideLoading();\n        }\n        this.hideLoading();\n      }, error => {\n        this.hideLoading();\n        console.log('fetch errored out', error);\n      })\n  }\n\n  launchCamera(){\n    console.log('launching actionsheet');\n    this.actionSheet.show(this.actionOptions).then((buttonIndex: number) => {\n      console.log('Option pressed', buttonIndex);\n      if(buttonIndex == 1){\n        console.log('launching camera');\n        this.camera.getPicture(this.options).then((imageData) => {\n          // imageData is either a base64 encoded string or a file URI\n          // If it's base64 (DATA_URL):\n          let base64Image = 'data:image/jpeg;base64,' + imageData;\n          console.log(base64Image);\n          // TODO: need code to upload to server here.\n          // On success: show toast\n          this.presentToastPrimary('Photo uploaded and added! \\n' + imageData);          \n        }, (err) => {\n          // Handle error\n          console.error(err);\n          // On Fail: show toast\n          this.presentToast(`Upload failed! Please try again \\n` + err);\n        }); \n      }else if(buttonIndex == 2){\n        console.log('launching gallery');\n        this.camera.getPicture(this.libraryOptions).then((imageData) => {\n          // imageData is either a base64 encoded string or a file URI\n          // If it's base64 (DATA_URL):\n          let base64Image = 'data:image/jpeg;base64,' + imageData;\n          console.log(base64Image);\n          // TODO: need code to upload to server here.\n          // On success: show toast\n          this.presentToastPrimary('Photo uploaded and added! \\n' + imageData);\n        }, (err) => {\n          // Handle error\n          console.error(err);\n          // On Fail: show toast\n          this.presentToast(`Upload failed! Please try again \\n` + err);\n        }); \n      }\n    }).catch((err) => {\n      console.log(err);\n      this.presentToast(`Operation failed! \\n` + err);\n    });\n  }\n\n  editPhotos(){\n    if(this.current_mode == 'view'){\n      console.log('entering photo edit mode');\n      this.current_mode = 'edit';\n      //display X icon top right of each photo div\n    }else{\n      console.log('returning to view mode');\n      this.current_mode = 'view'; //safety for mode\n    }\n    \n  }\n\n  async deletePhoto(recordid){\n      const alert = await this.alertController.create({\n        header: 'Deleting Photo',\n        message: 'Are you sure you want to delete this photo?',\n        buttons: [\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: () => {\n              console.log('user cancelled request to delete', recordid);\n            }\n          }, {\n            text: 'Delete',\n            handler: () => {\n              console.log('deleting photo');\n              document.getElementById(recordid).style.display = \"none\";\n              //some js to deletephoto function\n              //on delete success: \n              console.log('photo deleted', recordid);\n              this.presentToast(`Photo deleted!`);\n              //this.presentToast(`Photo deleted! ${recordid}`); //If we want to show asset link\n              //on fail:\n              //console.log('Photo delete failed with error', err);\n              //this.presentToast(`Photo delete failed with error ${err}`);\n            }\n          }\n        ]\n      });\n      await alert.present();\n  }\n\n  async presentToast(message: string) {\n    var toast = await this.toastController.create({\n      message: message,\n      duration: 2000,\n      position: \"bottom\",\n      color: \"danger\"\n    });\n    toast.present();\n  }\n\n  async presentToastPrimary(message: string) {\n    var toast = await this.toastController.create({\n      message: message,\n      duration: 2000,\n      position: \"bottom\",\n      color: \"primary\"\n    });\n    toast.present();\n  }\n\n  goToDetail(serviceid){\n    this.navCtrl.navigateBack(`services/detail/${serviceid}`);\n  }\n\n  ngOnInit() {\n    this.activatedRoute.params.subscribe((userData)=>{\n\n      if(userData.length !== 0){\n        this.serviceName = userData.servicename;\n        this.serviceid = userData.serviceid;\n        this.columnname = userData.columnname;\n        this.userinfo = userData;\n        console.log('param user data:', userData);\n        try{ \n          this.loadTheme(userData.theme.toLowerCase());\n        }catch{\n          console.log('couldnt load theme');\n        }\n        console.log('param user data length:', userData.length);\n        if(userData.length == undefined){\n          console.log ('nothing in params, so loading from storage');\n          this.isLogged().then(result => {\n            if (!(result == false)){\n              console.log('loading storage data (within param route function)', result);\n              this.userinfo = result;\n              this.loadTheme(result.theme.toLowerCase());\n              this.loadImages(this.serviceid,this.columnname);\n            }else{\n              console.log('nothing in storage, going back to login');\n              this.logout();\n            }\n          }); \n        }\n      }\n    });\n  }\n\n}\n"]}